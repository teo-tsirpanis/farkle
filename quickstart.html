<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Quick Start: Creating a calculator
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="A modern and easy-to-use parser library for F#"/>
    <meta name="author" content="Theodore Tsirpanis"/>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" async></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" integrity="sha384-4FeI0trTH/PCsLWrGCD1mScoFu9Jf2NdknFdFoJhXZFwsvzZ3Bo5sAh7+zL8Xgnd" crossorigin="anonymous">

    <link type="text/css" rel="stylesheet" href="/Farkle/content/style.css" />
    <script type="text/javascript" src="/Farkle/content/tips.js" async></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="https://github.com/teo-tsirpanis/Farkle">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/Farkle/index.html">Farkle</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1><a name="Quick-Start-Creating-a-calculator" class="anchor" href="#Quick-Start-Creating-a-calculator">Quick Start: Creating a calculator</a></h1>
<p>Hello everyone. This guide will help you use Farkle. We will be using F#, but during the process, you will learn some useful things about Farkle itself. There's <a href="csharp.html">another guide that explains what's different with C#</a>. You also have to be familiar with context-free grammars and parsing.</p>
<h2><a name="How-Farkle-works" class="anchor" href="#How-Farkle-works">How Farkle works</a></h2>
<blockquote>
<p><strong>Note</strong>: This is an oversimplified, high-level description of Farkle. I will write a more technical description of it in the future.</p>
</blockquote>
<p>While parser combinator libraries like FParsec combine many small parsers into a big parser, Farkle combines simple <em>grammars</em> (i.e. descriptions of languages) into more complex ones, and has a single, multi-purpose parser. These composable grammars are called <em>designtime Farkles</em>.</p>
<p>Also, as with FParsec, a designtime Farkle can "return" something. To accomplish this, there is a special object called a <em>post-proessor</em>. Post-processors create a domain-specific type from the input text. For our calculator, we will automatically create a post-processor that returns a number, which is the numerical result of our mathematical expression.</p>
<p>To be able to use a designtime Farkle, we will first feed it to a component called the <em>builder</em>. The builder will check the grammar for errors, create parsing tables with the LALR algoritm, and give us another special object called a <em>runtime Farkle</em>. Runtime Farkles contain a grammar and a post-processor. With a runtime Farkle, we can parse text to our heart's desires.</p>
<p>10: By the way, Farkle means: "FArkle Recognizes Known Languages Easily".</p>
<p>20: And "FArkle" means: (GOTO 10).</p>
<p>30: I guess you can't read this line.</p>
<blockquote>
<p>The original idea was to name the designtime Farkles simply <em>Farkles</em>, but having a type named <code>Farkle.Farkle</code> would create lots of confusion and compile errors.</p>
</blockquote>
<h2><a name="Designing-our-grammar" class="anchor" href="#Designing-our-grammar">Designing our grammar</a></h2>
<p>We want to design a grammar that represents a mathematical expressions on floating-point numbers. The supported operations will be addition, subtraction, multiplication, division, and unary negation. The operator precedence has to be honored, as well as parentheses.</p>
<p>A similar grammar but on the integers, can be found <a href="https://github.com/teo-tsirpanis/Farkle/blob/2ecc66d6b7b43a1b52b889aec78e865c0c5cf325/sample/Farkle.JSON.FSharp/SimpleMaths.fs#L68">here</a></p>
<h3><a name="The-terminals" class="anchor" href="#The-terminals">The terminals</a></h3>
<p>This grammar will have seven terminals: the number, and each of the math symbols, and the parentheses. In Farkle, we create terminals from hard-coded regular expressions (regexes). Let's see how a regular expression that recognizes a deimal number looks like:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="id">Farkle</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 2)" onmouseover="showTip(event, 'fs1', 2)" class="id">Farkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 3)" onmouseover="showTip(event, 'fs2', 3)" class="id">Builder</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 4)" onmouseover="showTip(event, 'fs1', 4)" class="id">Farkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="id">Builder</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs3', 6)" onmouseover="showTip(event, 'fs3', 6)" class="id">Regex</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 7)" onmouseover="showTip(event, 'fs4', 7)" class="id">System</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="id">numberRegex</span> <span class="o">=</span>
    <span class="c">// Regexes are composable!</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 9)" onmouseover="showTip(event, 'fs6', 9)" class="id">atLeastOneNumber</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs7', 10)" onmouseover="showTip(event, 'fs7', 10)" class="fn">chars</span> <span onmouseout="hideTip(event, 'fs8', 11)" onmouseover="showTip(event, 'fs8', 11)" class="id">Number</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="fn">atLeast</span> <span class="n">1</span>
    <span onmouseout="hideTip(event, 'fs10', 13)" onmouseover="showTip(event, 'fs10', 13)" class="fn">concat</span> <span class="pn">[</span>
        <span onmouseout="hideTip(event, 'fs6', 14)" onmouseover="showTip(event, 'fs6', 14)" class="id">atLeastOneNumber</span>
        <span onmouseout="hideTip(event, 'fs11', 15)" onmouseover="showTip(event, 'fs11', 15)" class="fn">optional</span> <span class="o">&lt;|</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs12', 16)" onmouseover="showTip(event, 'fs12', 16)" class="fn">char</span> <span class="s">&#39;.&#39;</span> <span class="o">&lt;&amp;&gt;</span> <span onmouseout="hideTip(event, 'fs6', 17)" onmouseover="showTip(event, 'fs6', 17)" class="id">atLeastOneNumber</span><span class="pn">)</span>
        <span class="pn">[</span><span onmouseout="hideTip(event, 'fs7', 18)" onmouseover="showTip(event, 'fs7', 18)" class="fn">chars</span> <span class="s">&quot;eE&quot;</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs7', 19)" onmouseover="showTip(event, 'fs7', 19)" class="fn">chars</span> <span class="s">&quot;+-&quot;</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs11', 20)" onmouseover="showTip(event, 'fs11', 20)" class="fn">optional</span><span class="pn">;</span> <span onmouseout="hideTip(event, 'fs6', 21)" onmouseover="showTip(event, 'fs6', 21)" class="id">atLeastOneNumber</span><span class="pn">]</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs10', 22)" onmouseover="showTip(event, 'fs10', 22)" class="fn">concat</span>
        <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs11', 23)" onmouseover="showTip(event, 'fs11', 23)" class="fn">optional</span>
    <span class="pn">]</span>
</code></pre></td>
</tr>
</table>
<p><code>Number</code> is an object implementing <code>IEnumerable&lt;char&gt;</code> which is called a <em>predefined set</em>. <a href="http://goldparser.org/doc/grammars/predefined-sets.htm">A list of all predefined sets</a> can be found at the documentation of GOLD Parser, the project that inspired Farkle.</p>
<blockquote>
<p><strong>Note:</strong> A future release will allow creating regexes from strings.</p>
</blockquote>
<p>With our regex being ready, we will create the terminal this way:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 24)" onmouseover="showTip(event, 'fs13', 24)" class="id">number</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 25)" onmouseover="showTip(event, 'fs14', 25)" class="fn">terminal</span> <span class="s">&quot;Number&quot;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs15', 26)" onmouseover="showTip(event, 'fs15', 26)" class="id">T</span><span class="pn">(</span><span class="k">fun</span> <span class="id">_</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="id">x</span> <span class="k">-&gt;</span> <span class="id">Double</span><span class="pn">.</span><span class="id">Parse</span><span class="pn">(</span><span onmouseout="hideTip(event, 'fs16', 28)" onmouseover="showTip(event, 'fs16', 28)" class="id">x</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs17', 29)" onmouseover="showTip(event, 'fs17', 29)" class="id">ToString</span><span class="pn">(</span><span class="pn">)</span><span class="pn">)</span><span class="pn">)</span><span class="pn">)</span> <span onmouseout="hideTip(event, 'fs5', 30)" onmouseover="showTip(event, 'fs5', 30)" class="id">numberRegex</span>

<span class="c">// Farkle also gives us this, but we can&#39;t</span>
<span class="c">// use it because we only want positive numbers.</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs18', 31)" onmouseover="showTip(event, 'fs18', 31)" class="id">_number</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs19', 32)" onmouseover="showTip(event, 'fs19', 32)" class="m">Terminals</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs20', 33)" onmouseover="showTip(event, 'fs20', 33)" class="id">float</span> <span class="s">&quot;Number&quot;</span>
</code></pre></td>
</tr>
</table>
<p>The function <code>terminal</code> takes three arguments. The first is the name of the terminal. The name is a purely informative field; many terminals with the same name are allowed. The second argument is called a <em>transformer</em>. It's a delegate that gets the position of the terminal and a <code>ReadOnlySpan&lt;char&gt;</code> that contains the terminal's data. The third argument is the regex that recognizes it. As we saw in <code>_number</code>, there are many more sample terminals in the <a href="reference/farkle-builder-terminals.html"><code>Terminals</code> module</a>.</p>
<blockquote>
<p><strong>Note:</strong> The regexes' type is <code>Farkle.Builder.Regex</code>. They are totally unrelated to <code>System.Text.ResularExpressions.Regex</code>. We can't convert between these two types, or directly match text against Farkle's regexes.</p>
</blockquote>
<p>The terminal we created is of type <code>DesigntimeFarkle&lt;float&gt;</code>. This means that we can theoretically use it to parse floating-point numbers from text. But we want to create someting bugger than that. As we are going to see, we can compose designtime Farkles into bigger ones, using nonterminals.</p>
<p>Also, before we continue, we don't have to explicitly write a terminal for the mathematical symbols. These are just symbols that do not return anything meaningful. We call them <em>literals</em>. Literals in Farkle are specially treated to reduce boilerplate.</p>
<h2><a name="The-nonterminals" class="anchor" href="#The-nonterminals">The nonterminals.</a></h2>
<h3><a name="Writing-simple-nonterminals" class="anchor" href="#Writing-simple-nonterminals">Writing simple nonterminals.</a></h3>
<p>Because the calculator's nonterminals are a bit complicated, we have to take a brief interlude and tell how to create simpler ones.</p>
<p>Say we want to make a very simple calculator that can either add or subtract two numbers together. And let's say that an empty string would result to zero. Writing this is actually surprisingly simple:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs21', 34)" onmouseover="showTip(event, 'fs21', 34)" class="id">_justTwoNumbers</span> <span class="o">=</span> <span class="s">&quot;Exp&quot;</span> <span class="o">||=</span> <span class="pn">[</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs13', 35)" onmouseover="showTip(event, 'fs13', 35)" class="id">number</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;+&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs13', 36)" onmouseover="showTip(event, 'fs13', 36)" class="id">number</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 37)" onmouseover="showTip(event, 'fs22', 37)" class="id">x1</span> <span onmouseout="hideTip(event, 'fs23', 38)" onmouseover="showTip(event, 'fs23', 38)" class="id">x2</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 39)" onmouseover="showTip(event, 'fs22', 39)" class="id">x1</span> <span class="o">+</span> <span onmouseout="hideTip(event, 'fs23', 40)" onmouseover="showTip(event, 'fs23', 40)" class="id">x2</span><span class="pn">)</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs13', 41)" onmouseover="showTip(event, 'fs13', 41)" class="id">number</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;-&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs13', 42)" onmouseover="showTip(event, 'fs13', 42)" class="id">number</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="k">fun</span> <span onmouseout="hideTip(event, 'fs22', 43)" onmouseover="showTip(event, 'fs22', 43)" class="id">x1</span> <span onmouseout="hideTip(event, 'fs23', 44)" onmouseover="showTip(event, 'fs23', 44)" class="id">x2</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs22', 45)" onmouseover="showTip(event, 'fs22', 45)" class="id">x1</span> <span class="o">-</span> <span onmouseout="hideTip(event, 'fs23', 46)" onmouseover="showTip(event, 'fs23', 46)" class="id">x2</span><span class="pn">)</span>
    <span onmouseout="hideTip(event, 'fs24', 47)" onmouseover="showTip(event, 'fs24', 47)" class="id">empty</span> <span class="o">=%</span> <span class="n">0.</span>
<span class="pn">]</span>
</code></pre></td>
</tr>
</table>
<p>Let's explain what was going here. With the <code>||=</code> operator, we define a nonterminal. In its left side goes its name, and in its right side go the productions that produce it. In the above code, we defined these two productions:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="pn">&lt;</span><span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="id">Number</span> <span class="o">+</span> <span class="id">Number</span>
<span class="pn">&lt;</span><span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="id">Number</span> <span class="o">-</span> <span class="id">Number</span>
<span class="pn">&lt;</span><span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="o">&lt;&gt;</span>
</code></pre></td>
</tr>
</table>
<p>See these strange symbols? They chain designtime Farkles together and signify which of them carry information we care about. <code>!@</code> starts defining a production with its first member carrying significant information (the first operand). To start a production with a designtime Farkle that does not carry significant information, we can use <code>!%</code>. The <code>.&gt;&gt;</code> and <code>.&gt;&gt;.</code> operators resemble FParsec's ones. <code>.&gt;&gt;</code> chains a new designtime Farkle we don't care what contains, and <code>.&gt;&gt;.</code> chains one we do.</p>
<p>With <code>.&gt;&gt;</code>, we can also chain string literals, instead of creating a terminal for each.</p>
<blockquote>
<p><strong>Note:</strong> <code>!@ x</code> is essentially equivalent to <code>empty .&gt;&gt;. x</code>.
<strong>Note:</strong> To start a production with a literal, use the <code>!&amp;</code> operator.</p>
</blockquote>
<p>The <code>=&gt;</code> operator finishes a production with a function that decides what to do with its members that we marked as significant. In the first case, we added the numbers, and in the second, we subtracted them. So, depending on the text, <code>_justTwoNumbers</code> would return either the sum, or the difference of them. Obviously, all productions of a nonterminal have to return the same type.</p>
<p>In the third case, we defined an empty production using <code>empty</code> (what a coincidence!) We used <code>empty =% 0.</code> instead of writing <code>empty =&gt; (fun () -&gt; 0.)</code>.</p>
<blockquote>
<p><strong>Note:</strong> An unfinished production is called a <em>production builder</em>. You can mark up to 16 significant members in a production builder.
<strong>Note:</strong> You can't pass an empty list in the right hand of the <code>||=</code> operator, or the grammar will be invalid.</p>
</blockquote>
<h3><a name="Writing-more-complex-nonterminals" class="anchor" href="#Writing-more-complex-nonterminals">Writing more complex nonterminals</a></h3>
<p>Now, our complete calculator grammar would look like this:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="c">// That &#39;s the starting symbol</span>
<span class="pn">&lt;</span><span class="id">Expression</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span>

<span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="s">&#39;+&#39;</span> <span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span>
<span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="s">&#39;-&#39;</span> <span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span>
<span class="pn">&lt;</span><span class="id">Add</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span>

<span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="s">&#39;*&#39;</span> <span class="pn">&lt;</span><span class="id">Negate</span> <span class="id">Exp</span><span class="pn">&gt;</span>
<span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="s">&#39;/&#39;</span> <span class="pn">&lt;</span><span class="id">Negate</span> <span class="id">Exp</span><span class="pn">&gt;</span>
<span class="pn">&lt;</span><span class="id">Mult</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Negate</span> <span class="id">Exp</span><span class="pn">&gt;</span>

<span class="pn">&lt;</span><span class="id">Negate</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="s">&#39;-&#39;</span> <span class="pn">&lt;</span><span class="id">Value</span><span class="pn">&gt;</span>
<span class="pn">&lt;</span><span class="id">Negate</span> <span class="id">Exp</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="pn">&lt;</span><span class="id">Value</span><span class="pn">&gt;</span>

<span class="pn">&lt;</span><span class="id">Value</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="id">Number</span>
<span class="pn">&lt;</span><span class="id">Value</span><span class="pn">&gt;</span> <span class="o">::</span><span class="o">=</span> <span class="s">&#39;(&#39;</span> <span class="pn">&lt;</span><span class="id">Expression</span><span class="pn">&gt;</span> <span class="s">&#39;)&#39;</span>
</code></pre></td>
</tr>
</table>
<blockquote>
<p><strong>Note:</strong> We hardcoded associativity and operator precedence to make the grammar unambiguous. A future release will allow configuring them more intuitively.</p>
</blockquote>
<p>The problem with this grammar is that the definitions of all nonterminals form a circle. And designtime Farkles are immutable, like almost everything else with F#. We can solve this problem however and the solution is actually surprisingly simple. But it's better to see how it is done in code:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
<span class="l">21: </span>
<span class="l">22: </span>
<span class="l">23: </span>
<span class="l">24: </span>
<span class="l">25: </span>
<span class="l">26: </span>
<span class="l">27: </span>
<span class="l">28: </span>
<span class="l">29: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs25', 48)" onmouseover="showTip(event, 'fs25', 48)" class="id">addExp</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs26', 49)" onmouseover="showTip(event, 'fs26', 49)" class="id">multExp</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs27', 50)" onmouseover="showTip(event, 'fs27', 50)" class="id">negateExp</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs28', 51)" onmouseover="showTip(event, 'fs28', 51)" class="id">value</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs29', 52)" onmouseover="showTip(event, 'fs29', 52)" class="fn">nonterminal</span> <span class="s">&quot;Add Exp&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs29', 53)" onmouseover="showTip(event, 'fs29', 53)" class="fn">nonterminal</span> <span class="s">&quot;Mult Exp&quot;</span><span class="pn">,</span>
    <span onmouseout="hideTip(event, 'fs29', 54)" onmouseover="showTip(event, 'fs29', 54)" class="fn">nonterminal</span> <span class="s">&quot;Negate Exp&quot;</span><span class="pn">,</span> <span onmouseout="hideTip(event, 'fs29', 55)" onmouseover="showTip(event, 'fs29', 55)" class="fn">nonterminal</span> <span class="s">&quot;Value&quot;</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs30', 56)" onmouseover="showTip(event, 'fs30', 56)" class="id">expression</span> <span class="o">=</span> <span class="s">&quot;Expression&quot;</span> <span class="o">||=</span> <span class="pn">[</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs25', 57)" onmouseover="showTip(event, 'fs25', 57)" class="id">addExp</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 58)" onmouseover="showTip(event, 'fs31', 58)" class="fn">id</span>
<span class="pn">]</span>

<span onmouseout="hideTip(event, 'fs25', 59)" onmouseover="showTip(event, 'fs25', 59)" class="fn">addExp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 60)" onmouseover="showTip(event, 'fs32', 60)" class="id">SetProductions</span><span class="pn">(</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs25', 61)" onmouseover="showTip(event, 'fs25', 61)" class="id">addExp</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;+&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs26', 62)" onmouseover="showTip(event, 'fs26', 62)" class="id">multExp</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="o">+</span><span class="pn">)</span><span class="pn">,</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs25', 63)" onmouseover="showTip(event, 'fs25', 63)" class="id">addExp</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;-&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs26', 64)" onmouseover="showTip(event, 'fs26', 64)" class="id">multExp</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="o">-</span><span class="pn">)</span><span class="pn">,</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs26', 65)" onmouseover="showTip(event, 'fs26', 65)" class="id">multExp</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 66)" onmouseover="showTip(event, 'fs31', 66)" class="fn">id</span>
<span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs26', 67)" onmouseover="showTip(event, 'fs26', 67)" class="fn">multExp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 68)" onmouseover="showTip(event, 'fs32', 68)" class="id">SetProductions</span><span class="pn">(</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs26', 69)" onmouseover="showTip(event, 'fs26', 69)" class="id">multExp</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;*&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs27', 70)" onmouseover="showTip(event, 'fs27', 70)" class="id">negateExp</span> <span class="o">=&gt;</span> <span class="o">(*)</span><span class="pn">,</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs26', 71)" onmouseover="showTip(event, 'fs26', 71)" class="id">multExp</span> <span class="o">.</span><span class="o">&gt;&gt;</span> <span class="s">&quot;/&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs27', 72)" onmouseover="showTip(event, 'fs27', 72)" class="id">negateExp</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="o">/</span><span class="pn">)</span><span class="pn">,</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs27', 73)" onmouseover="showTip(event, 'fs27', 73)" class="id">negateExp</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 74)" onmouseover="showTip(event, 'fs31', 74)" class="fn">id</span>
<span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs27', 75)" onmouseover="showTip(event, 'fs27', 75)" class="fn">negateExp</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 76)" onmouseover="showTip(event, 'fs32', 76)" class="id">SetProductions</span><span class="pn">(</span>
    <span class="o">!&amp;</span> <span class="s">&quot;-&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs28', 77)" onmouseover="showTip(event, 'fs28', 77)" class="id">value</span> <span class="o">=&gt;</span> <span class="pn">(</span><span class="o">~-</span><span class="pn">)</span><span class="pn">,</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs28', 78)" onmouseover="showTip(event, 'fs28', 78)" class="id">value</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 79)" onmouseover="showTip(event, 'fs31', 79)" class="fn">id</span>
<span class="pn">)</span>

<span onmouseout="hideTip(event, 'fs28', 80)" onmouseover="showTip(event, 'fs28', 80)" class="fn">value</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs32', 81)" onmouseover="showTip(event, 'fs32', 81)" class="id">SetProductions</span><span class="pn">(</span>
    <span class="o">!@</span> <span onmouseout="hideTip(event, 'fs13', 82)" onmouseover="showTip(event, 'fs13', 82)" class="id">number</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 83)" onmouseover="showTip(event, 'fs31', 83)" class="fn">id</span><span class="pn">,</span>
    <span class="o">!&amp;</span> <span class="s">&quot;(&quot;</span> <span class="o">.</span><span class="o">&gt;&gt;.</span> <span onmouseout="hideTip(event, 'fs30', 84)" onmouseover="showTip(event, 'fs30', 84)" class="id">expression</span> <span class="o">.</span><span class="o">&gt;&gt;</span>  <span class="s">&quot;)&quot;</span> <span class="o">=&gt;</span> <span onmouseout="hideTip(event, 'fs31', 85)" onmouseover="showTip(event, 'fs31', 85)" class="fn">id</span>
<span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<p>The magic lies within the <code>nonterminal</code> function. With this function, we create a nonterminal with a name, but we can set its production <em>later</em> with the <code>SetProductions</code> method. We can only once set them, all together. Calling the method again will be ignored.</p>
<p>The nonterminals are of type <code>Nonterminal&lt;float&gt;</code>, but implement <code>DesigntimeFarkle&lt;float&gt;</code>; it's actually an interface.</p>
<blockquote>
<p><strong>Warning:</strong> Despite designtime Farkles being interfaces, implementing it on your code is not allowed and will throw an exception if done.</p>
</blockquote>
<h2><a name="Building-our-grammar" class="anchor" href="#Building-our-grammar">Building our grammar</a></h2>
<p>With our nonterminals being ready, it's time to create a runtime Farkle that can parse mathematical expressions. The builder uses the LALR algorithm to create parser tables for our parser. It also creates a post-processor that will handle the parsed numbers.</p>
<blockquote>
<p><strong>Note:</strong> If a grammar is invalid (has an LALR conflict, two terminals are indistinguishable or something else), building would still succeed, but parsing would fail every time.</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 86)" onmouseover="showTip(event, 'fs33', 86)" class="id">myMarvelousRuntimeFarkle</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs34', 87)" onmouseover="showTip(event, 'fs34', 87)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs35', 88)" onmouseover="showTip(event, 'fs35', 88)" class="id">build</span> <span onmouseout="hideTip(event, 'fs30', 89)" onmouseover="showTip(event, 'fs30', 89)" class="id">expression</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Using-the-runtime-Farkle" class="anchor" href="#Using-the-runtime-Farkle">Using the runtime Farkle</a></h2>
<p>Now that we got it, it's time to put it to action. The <code>RuntimeFarkle</code> module has many functions to parse text from different sources. There is a simple function called <code>parse</code> which just parses a string. If you want to log what the parser actually does, you can use the function <code>parseString</code>.</p>
<p>Actually, all functions except <code>parse</code> take a function as a parameter, that gets called for every parser event. You can see what these events look like <a href="reference/farkle-parser-parsemessage.html">here</a>.</p>
<p>The functions return an F# <code>Result</code> type whose error value (if it unfortunately exists), can show exactly what did go wrong.</p>
<p>Let's look at some some examples:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">open</span> <span onmouseout="hideTip(event, 'fs4', 90)" onmouseover="showTip(event, 'fs4', 90)" class="id">System</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs36', 91)" onmouseover="showTip(event, 'fs36', 91)" class="id">IO</span>

<span class="c">// You can consume the parsing result like this:</span>
<span class="k">match</span> <span onmouseout="hideTip(event, 'fs34', 92)" onmouseover="showTip(event, 'fs34', 92)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 93)" onmouseover="showTip(event, 'fs37', 93)" class="id">parse</span> <span onmouseout="hideTip(event, 'fs33', 94)" onmouseover="showTip(event, 'fs33', 94)" class="id">myMarvelousRuntimeFarkle</span> <span class="s">&quot;103 + 137+281&quot;</span> <span class="k">with</span>
<span class="pn">|</span> <span onmouseout="hideTip(event, 'fs38', 95)" onmouseover="showTip(event, 'fs38', 95)" class="uc">Ok</span> <span onmouseout="hideTip(event, 'fs39', 96)" onmouseover="showTip(event, 'fs39', 96)" class="id">result</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs40', 97)" onmouseover="showTip(event, 'fs40', 97)" class="fn">printfn</span> <span class="s">&quot;The answer is </span><span class="pf">%f</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs39', 98)" onmouseover="showTip(event, 'fs39', 98)" class="id">result</span>
<span class="pn">|</span> <span onmouseout="hideTip(event, 'fs41', 99)" onmouseover="showTip(event, 'fs41', 99)" class="uc">Error</span> <span onmouseout="hideTip(event, 'fs42', 100)" onmouseover="showTip(event, 'fs42', 100)" class="id">err</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs43', 101)" onmouseover="showTip(event, 'fs43', 101)" class="fn">eprintfn</span> <span class="s">&quot;Error: </span><span class="pf">%O</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs42', 102)" onmouseover="showTip(event, 'fs42', 102)" class="id">err</span>

<span onmouseout="hideTip(event, 'fs34', 103)" onmouseover="showTip(event, 'fs34', 103)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs37', 104)" onmouseover="showTip(event, 'fs37', 104)" class="id">parse</span> <span onmouseout="hideTip(event, 'fs33', 105)" onmouseover="showTip(event, 'fs33', 105)" class="id">myMarvelousRuntimeFarkle</span> <span class="s">&quot;45 + 198 - 647 + 2 * 478 - 488 + 801 - 248&quot;</span>

<span onmouseout="hideTip(event, 'fs34', 106)" onmouseover="showTip(event, 'fs34', 106)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs44', 107)" onmouseover="showTip(event, 'fs44', 107)" class="id">parseString</span> <span onmouseout="hideTip(event, 'fs33', 108)" onmouseover="showTip(event, 'fs33', 108)" class="id">myMarvelousRuntimeFarkle</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs40', 109)" onmouseover="showTip(event, 'fs40', 109)" class="fn">printfn</span> <span class="s">&quot;</span><span class="pf">%O</span><span class="s">&quot;</span><span class="pn">)</span> <span class="s">&quot;111*555&quot;</span>

<span class="c">// You can parse any Memory&lt;char&gt;, such a substring or even an array of characters!</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 110)" onmouseover="showTip(event, 'fs45', 110)" class="id">mem</span> <span class="o">=</span> <span class="s">&quot;The answer is 45&quot;</span><span class="pn">.</span><span class="id">AsMemory</span><span class="pn">(</span><span class="pn">)</span><span class="pn">.</span><span class="id">Slice</span><span class="pn">(</span><span class="n">14</span><span class="pn">)</span>
<span onmouseout="hideTip(event, 'fs34', 111)" onmouseover="showTip(event, 'fs34', 111)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs46', 112)" onmouseover="showTip(event, 'fs46', 112)" class="id">parseMemory</span> <span onmouseout="hideTip(event, 'fs33', 113)" onmouseover="showTip(event, 'fs33', 113)" class="id">myMarvelousRuntimeFarkle</span> <span onmouseout="hideTip(event, 'fs47', 114)" onmouseover="showTip(event, 'fs47', 114)" class="fn">ignore</span> <span onmouseout="hideTip(event, 'fs45', 115)" onmouseover="showTip(event, 'fs45', 115)" class="id">mem</span>

<span onmouseout="hideTip(event, 'fs34', 116)" onmouseover="showTip(event, 'fs34', 116)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs48', 117)" onmouseover="showTip(event, 'fs48', 117)" class="id">parseFile</span> <span onmouseout="hideTip(event, 'fs33', 118)" onmouseover="showTip(event, 'fs33', 118)" class="id">myMarvelousRuntimeFarkle</span> <span onmouseout="hideTip(event, 'fs47', 119)" onmouseover="showTip(event, 'fs47', 119)" class="fn">ignore</span> <span class="s">&quot;gf.m&quot;</span>

<span onmouseout="hideTip(event, 'fs34', 120)" onmouseover="showTip(event, 'fs34', 120)" class="m">RuntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs49', 121)" onmouseover="showTip(event, 'fs49', 121)" class="id">parseTextReader</span> <span onmouseout="hideTip(event, 'fs33', 122)" onmouseover="showTip(event, 'fs33', 122)" class="id">myMarvelousRuntimeFarkle</span> <span onmouseout="hideTip(event, 'fs47', 123)" onmouseover="showTip(event, 'fs47', 123)" class="fn">ignore</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs50', 124)" onmouseover="showTip(event, 'fs50', 124)" class="rt">File</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs51', 125)" onmouseover="showTip(event, 'fs51', 125)" class="id">OpenText</span> <span class="s">&quot;fish.es&quot;</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<h2><a name="Bonus-Customizing-our-designtime-Farkle" class="anchor" href="#Bonus-Customizing-our-designtime-Farkle">Bonus: Customizing our designtime Farkle</a></h2>
<p>Before we continue, it would be nice to see how we can customize a designtime Farkle.</p>
<p>Most programming languages have comments, so why would Farkle not support them as well? We can create a designtime Farkle that adds support for comments in another one. Both block and line comments are supported. They cannot be nested.</p>
<p>By default, grammars are not case sensitive. But we can customize this behavior.</p>
<p>By default, whitespace characters is ignored. We can customize it once again.</p>
<p>We can also specify a symbol that will be discarded when encountered by the parser. These symbols are called <em>noise symbols</em>.</p>
<p>We will see some customizations as an example:</p>
<blockquote>
<p><strong>Warning:</strong> These customizations have to be done at the designtime Farkle that is going to be built (or they will have no effect) and always apply to the entire grammar.</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 126)" onmouseover="showTip(event, 'fs52', 126)" class="id">_customized</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs30', 127)" onmouseover="showTip(event, 'fs30', 127)" class="id">expression</span>
    <span class="c">// You can add as many types of block or line comments as you want.</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 128)" onmouseover="showTip(event, 'fs53', 128)" class="m">DesigntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs54', 129)" onmouseover="showTip(event, 'fs54', 129)" class="id">addBlockComment</span> <span class="s">&quot;/*&quot;</span> <span class="s">&quot;*/&quot;</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 130)" onmouseover="showTip(event, 'fs53', 130)" class="m">DesigntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs55', 131)" onmouseover="showTip(event, 'fs55', 131)" class="id">addLineComment</span> <span class="s">&quot;//&quot;</span>
    <span class="c">// Obviously, only the last change matters.</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 132)" onmouseover="showTip(event, 'fs53', 132)" class="m">DesigntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs56', 133)" onmouseover="showTip(event, 'fs56', 133)" class="id">caseSensitive</span> <span class="k">true</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 134)" onmouseover="showTip(event, 'fs53', 134)" class="m">DesigntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs57', 135)" onmouseover="showTip(event, 'fs57', 135)" class="id">autoWhitespace</span> <span class="k">false</span>
    <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs53', 136)" onmouseover="showTip(event, 'fs53', 136)" class="m">DesigntimeFarkle</span><span class="pn">.</span><span onmouseout="hideTip(event, 'fs58', 137)" onmouseover="showTip(event, 'fs58', 137)" class="id">addNoiseSymbol</span> <span class="s">&quot;Letters&quot;</span> <span class="pn">(</span><span onmouseout="hideTip(event, 'fs7', 138)" onmouseover="showTip(event, 'fs7', 138)" class="fn">chars</span> <span onmouseout="hideTip(event, 'fs59', 139)" onmouseover="showTip(event, 'fs59', 139)" class="id">AllLetters</span><span class="pn">)</span>
</code></pre></td>
</tr>
</table>
<hr />
<p>So that's it. I hope you understand. If you have any question, found a bug, or want a feature, feel free to <a href="https://github.com/teo-tsirpanis/farkle/issues">open a GitHub issue</a>.</p>

<div class="tip" id="fs1">namespace Farkle</div>
<div class="tip" id="fs2">namespace Farkle.Builder</div>
<div class="tip" id="fs3">Multiple items<br />module Regex<br /><br />from Farkle.Builder<br /><br />--------------------<br />type Regex =<br />&#160;&#160;private | Concat of Regex list<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| Alt of Regex list<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| Star of Regex<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| Chars of Set&lt;char&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;| AllButChars of Set&lt;char&gt;<br />&#160;&#160;&#160;&#160;member And : x2:Regex -&gt; Regex<br />&#160;&#160;&#160;&#160;member AtLeast : num:int -&gt; Regex<br />&#160;&#160;&#160;&#160;member Between : from:int -&gt; upTo:int -&gt; Regex<br />&#160;&#160;&#160;&#160;member IsNullable : unit -&gt; bool<br />&#160;&#160;&#160;&#160;member Optional : unit -&gt; Regex<br />&#160;&#160;&#160;&#160;member Or : x2:Regex -&gt; Regex<br />&#160;&#160;&#160;&#160;member Repeat : num:int -&gt; Regex<br />&#160;&#160;&#160;&#160;member ZeroOrMore : unit -&gt; Regex<br />&#160;&#160;&#160;&#160;static member Choice : [&lt;ParamArray&gt;] regexes:Regex [] -&gt; Regex<br />&#160;&#160;&#160;&#160;static member private IsCharSetFull : x:Set&lt;char&gt; -&gt; bool<br />&#160;&#160;&#160;&#160;...</div>
<div class="tip" id="fs4">namespace System</div>
<div class="tip" id="fs5">val numberRegex : Regex</div>
<div class="tip" id="fs6">val atLeastOneNumber : Regex</div>
<div class="tip" id="fs7">val chars : str:seq&lt;char&gt; -&gt; Regex</div>
<div class="tip" id="fs8">val Number : PredefinedSet</div>
<div class="tip" id="fs9">val atLeast : num:int -&gt; x:Regex -&gt; Regex</div>
<div class="tip" id="fs10">val concat : xs:seq&lt;Regex&gt; -&gt; Regex</div>
<div class="tip" id="fs11">val optional : x:Regex -&gt; Regex</div>
<div class="tip" id="fs12">Multiple items<br />val char : c:char -&gt; Regex<br /><br />--------------------<br />type char = System.Char</div>
<div class="tip" id="fs13">val number : DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs14">val terminal : name:string -&gt; fTransform:T&lt;&#39;a&gt; -&gt; regex:Regex -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs15">T (Position -&gt; System.ReadOnlySpan&lt;char&gt; -&gt; float)</div>
<div class="tip" id="fs16">val x : System.ReadOnlySpan&lt;char&gt;</div>
<div class="tip" id="fs17"></div>
<div class="tip" id="fs18">val _number : DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs19">module Terminals<br /><br />from Farkle.Builder</div>
<div class="tip" id="fs20">val float : name:string -&gt; DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs21">val _justTwoNumbers : DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs22">val x1 : float</div>
<div class="tip" id="fs23">val x2 : float</div>
<div class="tip" id="fs24">val empty : ProductionBuilder</div>
<div class="tip" id="fs25">val addExp : Nonterminal&lt;float&gt;</div>
<div class="tip" id="fs26">val multExp : Nonterminal&lt;float&gt;</div>
<div class="tip" id="fs27">val negateExp : Nonterminal&lt;float&gt;</div>
<div class="tip" id="fs28">val value : Nonterminal&lt;float&gt;</div>
<div class="tip" id="fs29">val nonterminal : name:string -&gt; Nonterminal&lt;&#39;a&gt;</div>
<div class="tip" id="fs30">val expression : DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs31">val id : x:&#39;T -&gt; &#39;T</div>
<div class="tip" id="fs32">member Nonterminal.SetProductions : firstProd:Production&lt;&#39;T&gt; * [&lt;System.ParamArray&gt;] prods:Production&lt;&#39;T&gt; [] -&gt; unit</div>
<div class="tip" id="fs33">val myMarvelousRuntimeFarkle : RuntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs34">Multiple items<br />module RuntimeFarkle<br /><br />from Farkle<br /><br />--------------------<br />type RuntimeFarkle&lt;&#39;TResult&gt; =<br />&#160;&#160;private {Grammar: Result&lt;(Grammar * OptimizedOperations),BuildError&gt;;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PostProcessor: PostProcessor&lt;&#39;TResult&gt;;}<br />&#160;&#160;&#160;&#160;member GetBuildErrorMessage : unit -&gt; string<br />&#160;&#160;&#160;&#160;member GetGrammar : unit -&gt; Grammar<br />&#160;&#160;&#160;&#160;member IsBuildSuccessful : bool<br />&#160;&#160;&#160;&#160;static member Create : fileName:string * postProcessor:PostProcessor&lt;&#39;a1&gt; -&gt; RuntimeFarkle&lt;&#39;a1&gt;<br />&#160;&#160;&#160;&#160;static member Create : grammar:Grammar * postProcessor:PostProcessor&lt;&#39;a1&gt; -&gt; RuntimeFarkle&lt;&#39;a1&gt;<br />&#160;&#160;&#160;&#160;static member CreateFromBase64String : str:string * postProcessor:PostProcessor&lt;&#39;a1&gt; -&gt; RuntimeFarkle&lt;&#39;a1&gt;<br />&#160;&#160;&#160;&#160;static member private CreateMaybe : postProcessor:PostProcessor&lt;&#39;a1&gt; -&gt; grammarMaybe:Result&lt;Grammar,BuildError&gt; -&gt; RuntimeFarkle&lt;&#39;a1&gt;</div>
<div class="tip" id="fs35">val build : df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; RuntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs36">namespace System.IO</div>
<div class="tip" id="fs37">val parse : rf:RuntimeFarkle&lt;&#39;a&gt; -&gt; x:string -&gt; Result&lt;&#39;a,FarkleError&gt;</div>
<div class="tip" id="fs38">union case Result.Ok: ResultValue: &#39;T -&gt; Result&lt;&#39;T,&#39;TError&gt;</div>
<div class="tip" id="fs39">val result : float</div>
<div class="tip" id="fs40">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="tip" id="fs41">union case Result.Error: ErrorValue: &#39;TError -&gt; Result&lt;&#39;T,&#39;TError&gt;</div>
<div class="tip" id="fs42">val err : FarkleError</div>
<div class="tip" id="fs43">val eprintfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T</div>
<div class="tip" id="fs44">val parseString : rf:RuntimeFarkle&lt;&#39;a&gt; -&gt; fMessage:(Parser.ParseMessage -&gt; unit) -&gt; inputString:string -&gt; Result&lt;&#39;a,FarkleError&gt;</div>
<div class="tip" id="fs45">val mem : System.ReadOnlyMemory&lt;char&gt;</div>
<div class="tip" id="fs46">val parseMemory : rf:RuntimeFarkle&lt;&#39;a&gt; -&gt; fMessage:(Parser.ParseMessage -&gt; unit) -&gt; input:System.ReadOnlyMemory&lt;char&gt; -&gt; Result&lt;&#39;a,FarkleError&gt;</div>
<div class="tip" id="fs47">val ignore : value:&#39;T -&gt; unit</div>
<div class="tip" id="fs48">val parseFile : rf:RuntimeFarkle&lt;&#39;a&gt; -&gt; fMessage:(Parser.ParseMessage -&gt; unit) -&gt; inputFile:string -&gt; Result&lt;&#39;a,FarkleError&gt;</div>
<div class="tip" id="fs49">val parseTextReader : rf:RuntimeFarkle&lt;&#39;a&gt; -&gt; fMessage:(Parser.ParseMessage -&gt; unit) -&gt; textReader:TextReader -&gt; Result&lt;&#39;a,FarkleError&gt;</div>
<div class="tip" id="fs50">type File =<br />&#160;&#160;static member AppendAllLines : path:string * contents:IEnumerable&lt;string&gt; -&gt; unit + 1 overload<br />&#160;&#160;static member AppendAllText : path:string * contents:string -&gt; unit + 1 overload<br />&#160;&#160;static member AppendText : path:string -&gt; StreamWriter<br />&#160;&#160;static member Copy : sourceFileName:string * destFileName:string -&gt; unit + 1 overload<br />&#160;&#160;static member Create : path:string -&gt; FileStream + 3 overloads<br />&#160;&#160;static member CreateText : path:string -&gt; StreamWriter<br />&#160;&#160;static member Decrypt : path:string -&gt; unit<br />&#160;&#160;static member Delete : path:string -&gt; unit<br />&#160;&#160;static member Encrypt : path:string -&gt; unit<br />&#160;&#160;static member Exists : path:string -&gt; bool<br />&#160;&#160;...</div>
<div class="tip" id="fs51">File.OpenText(path: string) : StreamReader</div>
<div class="tip" id="fs52">val _customized : DesigntimeFarkle&lt;float&gt;</div>
<div class="tip" id="fs53">Multiple items<br />module DesigntimeFarkle<br /><br />from Farkle.Builder<br /><br />--------------------<br />type DesigntimeFarkle =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Metadata : GrammarMetadata<br />&#160;&#160;&#160;&#160;abstract member Name : string<br />&#160;&#160;end<br /><br />--------------------<br />type DesigntimeFarkle&lt;&#39;T&gt; =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;inherit DesigntimeFarkle<br />&#160;&#160;end</div>
<div class="tip" id="fs54">val addBlockComment : commentStart:string -&gt; commentEnd:string -&gt; df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs55">val addLineComment : commentStart:string -&gt; df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs56">val caseSensitive : flag:bool -&gt; df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs57">val autoWhitespace : flag:bool -&gt; df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs58">val addNoiseSymbol : name:string -&gt; regex:Regex -&gt; df:DesigntimeFarkle&lt;&#39;a&gt; -&gt; DesigntimeFarkle&lt;&#39;a&gt;</div>
<div class="tip" id="fs59">val AllLetters : PredefinedSet</div>

        </div>
        <div class="span3">
          <img src="/Farkle/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Farkle</li>
            <li><a href="/Farkle/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.org/packages/Farkle">Get Library via NuGet</a></li>
            <li><a href="https://github.com/teo-tsirpanis/Farkle">Source Code on GitHub</a></li>
            <li><a href="/Farkle/license.html">License</a></li>
            <li><a href="/Farkle/release-notes.html">Release Notes</a></li>

            <li class="nav-header">Getting started</li>
            <li><a href="/Farkle/quickstart.html">Quick Start with F#</a></li>
            <li><a href="/Farkle/csharp.html">Using Farkle with C#</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/Farkle/reference/index.html">API Reference</a></li>
            <li><a href="/Farkle/templates.html">Templating Reference</a></li>
            <li><a href="/Farkle/the-precompiler.html">The precompiler</a></li>
            <li><a href="/Farkle/advanced-features.html">Advanced Features</a></li>
            <li><a href="/Farkle/gold-parser-missing-features.html">Missing Features from GOLD Parser</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/teo-tsirpanis/Farkle" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </body>
</html>
