<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Templating Reference
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="A modern and easy-to-use parser library for F#"/>
    <meta name="author" content="Theodore Tsirpanis"/>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" async></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <link href="https://stackpath.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet" integrity="sha384-4FeI0trTH/PCsLWrGCD1mScoFu9Jf2NdknFdFoJhXZFwsvzZ3Bo5sAh7+zL8Xgnd" crossorigin="anonymous">

    <link type="text/css" rel="stylesheet" href="/Farkle/content/style.css" />
    <script type="text/javascript" src="/Farkle/content/tips.js" async></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="https://github.com/teo-tsirpanis/Farkle">github page</a></li>
        </ul>
        <h3 class="muted"><a href="/Farkle/index.html">Farkle</a></h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          <h1><a name="Templating-Reference" class="anchor" href="#Templating-Reference">Templating Reference</a></h1>
<p>Farkle comes with a templating system which further helps developers work with the grammars they create. This system is a more powerful edition of both GOLD Parser's <a href="http://www.goldparser.org/doc/builder-cmd/goldwebpage.htm">"Create Webpage"</a> and <a href="http://www.goldparser.org/doc/builder-cmd/goldprog.htm">"Create Skeleton Program"</a> tools. In this guide, we will first see how to create an HTML page describing our grammar, and next we will see how to create our own templates. So, are you ready? Let's do this!</p>
<h2><a name="Preparing-ourselves" class="anchor" href="#Preparing-ourselves">Preparing ourselves</a></h2>
<p>Before we start, we first have to install <a href="https://nuget.org/packages/Farkle.Tools">Farkle's CLI tool from NuGet</a> by opening a command prompt and running</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="id">dotnet</span> <span class="id">tool</span> <span class="id">install</span> <span class="o">-</span><span class="id">g</span> <span class="id">Farkle</span><span class="pn">.</span><span class="id">Tools</span>
</code></pre></td>
</tr>
</table>
<h3><a name="Supported-input-types" class="anchor" href="#Supported-input-types">Supported input types</a></h3>
<p>The CLI tool can work with grammars from three kinds of files:</p>
<ul>
<li>GOLD Parser 5.0 Enhanced Grammar Tables files with the <code>.egt</code> extension.</li>
<li>.NET assemblies with <a href="the-precompiler.html"><strong>precompiled</strong></a> grammars. These assemblies can target any framework and their dependencies don't have to be present. Because precompiled grammars are stored in the assembly's embedded resources, no code from them is executed.</li>
<li>.NET projects with precompiled grammars. The projects must have already been built; Farkle does not do it by itself at the moment.</li>
</ul>
<p>If we don't explicitly specify an input, the CLI tool will try to find a project in the current directory. If only one is found, it will be used. Otherwise the tool will fail with an error.</p>
<h3><a name="Dealing-with-multiple-precompiled-grammars" class="anchor" href="#Dealing-with-multiple-precompiled-grammars">Dealing with multiple precompiled grammars</a></h3>
<p>If the assembly or project passed to the CLI tool has only one precompiled grammar, it will be automatically used. If it has more than one however, we can tell it which one to use by adding a <code>::MyGrammar</code> to the end of the input path.</p>
<p>To see an example, if you want to pick a specific grammar from an assembly or project, you can do it by writing <code>MyAssembly.dll::MyGrammar</code> or <code>MyProject.csproj::MyGrammar</code> respectively. If the current directory has only one project and you are bored to type it, you can write <code>::MyGrammar</code>.</p>
<p>You can see the names of all precompiled grammars with the <code>farkle list</code> command which also takes an assembly, a project, or tries to find one on its own.</p>
<h2><a name="Creating-HTML-pages" class="anchor" href="#Creating-HTML-pages">Creating HTML pages</a></h2>
<p>For the rest of this guide, we will assume that we have a project with a precompiled grammar next to us. Once we build it, we can create an HTML page by running <code>farkle new</code>.</p>
<p>If everything went well, we will see a file named like <code>MyAwesomeGrammar.html</code>. It describes the grammar's syntax, its LALR states, its DFA states and more. If you are just watching, take a look at a sample <a href="JSON-generated.html">HTML file generated for a JSON grammar</a> to get a better idea.</p>
<p>These HTML files can be customized by omitting the state tables, the CSS styling, or by adding custom content at the end if their <code>&lt;head&gt;</code>. Run <code>farkle new --help</code> to get all the available options.</p>
<p>You can automatically generate an HTML file from your project's precompiled grammars by adding the following lines in it:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="xml"><span class="k">&lt;</span><span class="i">PropertyGroup</span><span class="k">&gt;</span>
  <span class="k">&lt;</span><span class="i">FarkleGenerateHtml</span><span class="k">&gt;</span>true<span class="k">&lt;/</span><span class="i">FarkleGenerateHtml</span><span class="k">&gt;</span>
<span class="k">&lt;/</span><span class="i">PropertyGroup</span><span class="k">&gt;</span>
</code></pre></td></tr></table>
<p>The HTML files will be generated to your project's build output directory and cannot be customized in any way. They are intended for development use; for most customizability it is recommended to use the CLI tool.</p>
<h2><a name="Creating-your-own-templates" class="anchor" href="#Creating-your-own-templates">Creating your own templates</a></h2>
<p>Instead of GOLD's custom and limited templating language, Farkle's templates use [Scriban], which features a much more powerful templating language. If you want to create your own templates, I recommend to first learn it from <a href="https://github.com/scriban/scriban/blob/master/doc/language.md">Scriban's official documentation</a>.</p>
<h3><a name="Variables" class="anchor" href="#Variables">Variables</a></h3>
<p>Farkle's templates can use the following Scriban variables:</p>
<ul>
<li><p><code>file_extension</code>: This variable is used to change the default extension of the output file. For example if you are creating an HTML template you would add a `{{ file_extension = ".html" }} at the beginning.</p></li>
<li><p><code>farkle.version</code>: The version of the CLI tool.</p></li>
<li>
<p><code>grammar</code>: A Farkle <code>Grammar</code> object that represents the input grammar.</p>
<ul>
<li><p><code>grammar.productions_groupped</code>: A <code>System.Linq.IGrouping&lt;Nonterminal,Production&gt;</code> object that groups productions by their head nonterminal.</p></li>
</ul>
</li>
<li><p><code>grammar_path</code>: The path to the given input file; either a grammar file or an assembly. When processing project files this variable will have the project's underlying assembly.</p></li>
<li><p><code>properties</code>: An object that holds custom properties passed by the <code>-prop</code> CLI argument. For example, if you pass <code>-prop foo bar</code> to the CLI tool and write <code>{{ properties.foo }}</code> in your template, it will be evaluated as <code>bar</code>.</p></li>
</ul>
<p>Scriban imports all properties of Farkle's objects but changes their names. Take a look at <a href="https://github.com/teo-tsirpanis/Farkle/tree/master/src/Farkle.Tools.Shared/builtin-templates">Farkle's built-in templates</a> to get an idea how to write your own template, but keep in mind that the HTML templates use some constructs not available to custom templates, like Scriban's <code>import</code> statement and some other internal functions.</p>
<h3><a name="Functions" class="anchor" href="#Functions">Functions</a></h3>
<p>The templates can furthermore use the following functions:</p>
<ul>
<li><code>to_base_64 &lt;bool&gt;</code>: Returns the grammar file as a Base64-encoded string. If you pass <code>true</code>, it will add line breaks every 76 characters.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Precompiled grammars from an assembly or project are encoded in a format called EGTneo which is incompatible with GOLD Parser's EGT's format. When creating a template from an EGT file however, the <code>to_base_64</code> function will return the Base-64 representation of that file.</p>
</blockquote>
<ul>
<li><p><code>group_dfa_edge &lt;dfa_state&gt;</code>: Returns an <code>IGrouping</code> object that groups the edges of a DFA state by their action.</p></li>
<li><p><code>fmt &lt;terminal or production&gt; &lt;case&gt; &lt;separator&gt;</code>: Formats a terminal or a production to a string. You can specify the case of the generated string (<code>upper_case</code>, <code>lower_case</code>, <code>pascal_case</code>, <code>camel_case</code>), as well as the separator between the members of the production.</p></li>
</ul>
<h3><a name="Using-custom-templates" class="anchor" href="#Using-custom-templates">Using custom templates</a></h3>
<p>A custom template can be rendered by writing <code>farkle new -t MyCustomTemplate.scriban</code>. Of <code>farkle new</code>'s arguments, custom templates only support <code>-prop</code>, as explained above.</p>
<hr />
<p>So, I hope you enjoyed this little guide. If you did, don't forget to give Farkle.Tools a try, and maybe you feel especially willing to create some templates today, and want to hit the star button as well. I hope that all of you have a wonderful day, and to see you soon. Goodbye!</p>


        </div>
        <div class="span3">
          <img src="/Farkle/img/logo.png" alt="F# Project" style="width:150px;margin:10px" />
          <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
            <li class="nav-header">Farkle</li>
            <li><a href="/Farkle/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="https://nuget.org/packages/Farkle">Get Library via NuGet</a></li>
            <li><a href="https://github.com/teo-tsirpanis/Farkle">Source Code on GitHub</a></li>
            <li><a href="/Farkle/license.html">License</a></li>
            <li><a href="/Farkle/release-notes.html">Release Notes</a></li>
            <li><a href="/Farkle/choosing-a-parser.html">Choosing a parser: Farkle vs alternatives</a></li>

            <li class="nav-header">Getting started</li>
            <li><a href="/Farkle/quickstart.html">Quick Start with F#</a></li>
            <li><a href="/Farkle/csharp.html">Using Farkle with C#</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="/Farkle/reference/index.html">API Reference</a></li>
            <li><a href="/Farkle/templates.html">Templating Reference</a></li>
            <li><a href="/Farkle/string-regexes.html">String regex reference</a></li>
            <li><a href="/Farkle/the-precompiler.html">The precompiler</a></li>
            <li><a href="/Farkle/advanced-features.html">Advanced Features</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="https://github.com/teo-tsirpanis/Farkle" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#fff; color:#151513; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  </body>
</html>
